---
title: CMOS
date: 2021-05-13 18:29:01
update: 2021-05-13 18:29:01
urlname: CMOS
tags:
  - Assembly
  - 8086
categories: Assembly
---

# CMOS RAM 芯片

简称为 CMOS，特征如下：

1. 包含一个实时钟和一个有 128 个存储单元的 RAM 存储器（早期的计算机为 64 个字节）；
2. 该芯片靠电池供电，所以，关机后其内部的实时钟仍可正常工作，RAM 中的信息不丢失；
3. 128 个字节的 RAM 中，内部实时钟占用 0 ~ 0dh 单元来保存时间信息，其余大部分单元用于保存系统配置信息，供系统启动时 BIOS 程序读取。
   BIOS 也提供了相关的程序，使我们可以在开机的时候配置 CMOS RAM 中的系统信息。
4. 该芯片内部有两个端口，端口地址为 70h 和 71h。CPU 通过这两个端口来读写 CMOS RAM；
5. 70h 为地址端口，存放要访问的 CMOS RAM 单元的地址；71h 为数据端口，存放从选定的 CMOS RAM 单元中读取的数据，或要写入到其中的数据。

CPU 对 CMOS RAM 的读写分两步进行，比如，读 CMOS RAM 的 2 号单元：

1. 将 2 送入端口 70h；
2. 从端口 71h 读出 2 号单元的内容。

<!-- more -->

## 时间信息

在 CMOS RAM 中，存放着当前的时间：年、月、日、时、分、秒。
这 6 个信息的长度都为 1 个字节，存放单元为：

| 单元 |  0  |  2  |  4  |  7  |  8  |  9  |
| :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| 信息 | 秒  | 分  | 时  | 日  | 月  | 年  |

这些数据以 BCD 码的方式存放。

### BCD 码

BCD 码是以 4 位二进制数表示十进制数码的编码方法：

| 十进制 | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
| :--: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| BCD 码 | 0000 | 0001 | 0010 | 0011 | 0100 | 0101 | 0110 | 0111 | 1000 | 1001 |

一个字节可表示两个 BCD 码，高 4 位的 BCD 码表示十位，低 4 位的 BCD 码表示个位。
