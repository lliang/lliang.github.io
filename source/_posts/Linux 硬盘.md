---
title: Linux 硬盘
date: 2021-05-13 19:25:31
update: 2021-05-13 19:25:31
urlname: linux-hard-disk
tags: Linux
categories: Linux
---

Linux 硬盘分 IDE 硬盘和 SCSI 硬盘

## 驱动器标识符

### IDE 硬盘 “hdx~”

- ”hd“ 表明分区所在设备的类型为 IDE 硬盘

- ”x“ 为盘号

  - a - 基本盘
  - b - 基本从属盘
  - c - 辅助主盘
  - d - 辅助从属盘

- ”~“ 代表分区

  - 前四个分区用数字 1 到 4 表示，它们是主分区或扩展分区
  - 从 5 开始是逻辑分区

<!-- more -->

### SCSI 硬盘 ”sdx~“

- ”sd“ 表明分区所在设备的类型为 SCSI 硬盘

## 查看设备挂载

`lsblk` - list block devices

`lsblk [options] [device...]`

### OPTIONS

-f --fs

输出有关文件系统的信息。
此选项等效于-o NAME，FSTYPE，LABEL，MOUNTPOINT。
关于文件系统和 RAID 的权威信息由 blkid（8）命令提供。

## 分区

`fdisk` - Linux 分区表操作工具软件

### 描述

硬盘可以被分成一个或多个逻辑磁盘，称为”分区“。这些分区信息都存放在硬盘 0 扇区的”分区表“中。

在 BSD 风格中，分区被称为“磁盘片”和“磁盘标签”

- Linux 至少需要一个分区，即用做它的 root 文件系统。

- Linux 可以使用交换文件和/或交换分区，交换分区更有效。因此，通常用户会创建第二个 Linux 分区供交换分区使用。

- 在 Intel 兼容的硬件上，启动系统的 BIOS 往往只能访问**1024**柱面之前的硬盘。
  因此，使用大硬盘的用户通常创建第三个只有几兆大小的小分区，通常用来装配在 /boot，用来存放内核映象和一些其它启动时需要的附属文件，
  所以应确保此分区必须是在 BIOS 可访问的部分。

出于安全方面的考虑、管理方面的原因、备份的需要或为了某些测试，也可以将一个硬盘分成更多的分区使用。

fdisk （以第一种形式调用）是一个以菜单问答形式出现的用来创建和修改分区的程序。
它可以辩认 DOS 类型的分区表和 BSD 或 SUN 类型的磁盘标签。

设备 通常是下列之一：

- /dev/hda
- /dev/hdb
- /dev/sda
- /dev/sdb

- /dev/hd[a-h] 指 IDE 硬盘;
- /dev/sd[a-p] 指 SCSI 硬盘;
- /dev/ed[a-d] 指 ESDI 硬盘;
- /dev/xd[ab] 指 XT 硬盘。

设备名指整个硬盘设备。

分区 是在设备名后跟一个分区号。

例如： /dev/hda1 是指系统在第一个 IDE 硬盘上的第一个分区。

IDE 硬盘可以最多创建 63 个分区，SCSI 可以创建 15 个。
又见 /usr/src/linux/Documnetation/devices.txt。

一个 BSD/SUN 风格的磁盘标签可以描述 8 个分区，其中第三个应该是“整个磁盘”分区。

不要在零柱面使用那些的确使用其第一扇区的分区，（比如交换分区） 因为这将损坏磁盘标签。

一个 IRIX/SGI 风格的磁盘标签可以描述 16 个分区，其中第十一个应该是完整“卷标”分区，
而第九个应该被标成“卷标头”。
卷标头将覆盖分区表，即，它从零块开始并缺省时延伸 5 个柱面。
卷标头中余下的空间可以用来存放头部目录记录信息。不要有任何分区与此卷标头重叠。
同样，也不要改变它的类形和在其中创建任何文件系统，因为这样做将丢失分区表信息。只有当将 Linux 安装在
IRIX/SGI 机器上或在 Linux 中使用 IRIX/SGI 磁盘时才会使用这种类形的标签。

一个 DOS 风格的分区表可以描述无限的分区。零扇区用来存放 4 个分区（称为主分区）的描述信息。
其中可以有一个分区是扩展分区；此扩展分区也就是存储各逻辑分区地方，
是一个在组成链表的扇区里存放的描述符，每个描述符都是一个对应分区的开头．
四个主分区，不管是否存在，都用数字 1-4 编号，而逻辑分区以 5 开始。

在 DOS 风格的分区表中，开始地址偏移量和每个分区的大小是以两种不同的方式来存放的：
以扇区数的绝对值来描述（占 32 位）和以柱面、磁头、扇区三个一组的形式（占 10+8+6 个位）来描述。
前一种描述很好 - 如果每扇区 512 个字节的情况，这种方式可描述到 2TB 的大小。后一种方式有两个不同的问题。
第一个是这种 C/H/S 方式必须是在磁头数和每磁道扇区数都已知的情况下才能使用。
第二个是就算我们已经知道了这些数字，而只用 24 位来描述这些信息也是不够的。 DOS 只使用这种 C/H/S
的方式，Windows 则两个都用，Linux 则不使用 C/H/S 的方式。

### 命令

- m 显示命令列表
- p 显示磁盘分区，同 fdisk -l
- n 新增分区
- d 删除分区
- w 写入并退出

## 格式化

格式化磁盘

`mkfs -t ext4 /dev/sdb1`

其中 `ext4` 是分区类型

## 挂载

挂载：将一个分区与一个目录联系起来

`mount 设备名称 挂载目录`

取消挂载

`umount 设备名称` 或 `umount 挂载目录`

用命令行挂载，重启后会失效

### 永久挂载

通过修改 /etc/fstab 实现

添加完成后执行`mount -a`即刻生效
