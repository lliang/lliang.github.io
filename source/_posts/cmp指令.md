---
title: cmp指令
date: 2021-05-13 18:33:22
update: 2021-05-13 18:33:22
urlname: cmp
tags:
  - Assembly
  - 8086
categories: Assembly
---

cmp 是比较指令，cmp 的功能相当于减法指令，只是不保存结果。

cmp 指令执行后，将对标志寄存器产生影响。其它相关指令通过识别这些被影响的标志寄存器位来得知比较结果。

cmp 指令格式：cmp 操作对象 1，操作对象 2

功能： 计算操作对象 1 - 操作对象 2 但并不保存结果（在指令执行的过程中，它暂存在 CPU 内部的暂存器中），仅仅根据计算结果对标志寄存器进行设置。

即：通过做减法运算，影响标志寄存器，标志寄存器的相关位记录了比较的结果。

CPU 在执行 cmp 指令的时候，也包含两种含义：进行无符号数运算和进行有符号数运算。

<!-- more -->

cmp 进行无符号数比较时，相关标志位对比较结果的记录：

`cmp ax,bx`

- zf = 1，说明 (ax) == (bx)
- zf = 0，说明 (ax) != (bx)
- cf = 1，说明 (ax) < (bx)
- cf = 0，说明 (ax) >= (bx)
- cf = 0 并且 zf = 0，说明 (ax) > (bx)
- cf = 1 或 zf = 1，说明 (ax) <= (bx)

cmp 进行有符号数比较时，相关标志位对比较结果的记录：

`cmp ah,bh`

- zf = 1，说明 (ah) == (bh)
- zf = 0，说明 (ah) != (bh)
- sf = 1, of = 0，逻辑上真正结果的正负 = 实际结果的正负，所以说明 (ah) < (bh)
- sf = 1, of = 1，发生溢出，如果因为溢出导致了实际结果为负，那么逻辑上真正的结果必然为正，所以说明 (ah) > (bh)
- sf = 0, of = 1，发生溢出，如果因为溢出导致了实际结果为正，那么逻辑上真正的结果必然为负，所以说明 (ah) < (bh)
- sf = 0, of = 0，逻辑上真正结果的正负 = 实际结果的正负，所以说明 (ah) >= (bh)

sf 记录的只是可以在计算机中存放的相应位数的结果的正负。
所得到的相应结果的正负，并不能说明，运算所应该得到的结果的正负。
这是因为在运算的过程中可能发生溢出。

实际结果的正负，之所以不能说明逻辑上真正结果的正负，关键的原因在于发生了溢出。
