# Go 词法单元

## token

构成源程序的基本不可再分割的单元。

编译器编译源程序的第一步：词法分析阶段将源程序分割为一个个独立的 token。

token 分类：

- identifiers（标识符）
  - Predeclared identifiers（预声明标识符）
    - keywords（关键字）
    - 其他预声明标识符
      - 内置数据类型标识符
      - 常量值标识符
      - 空白标识符
      - 内置函数
  - 用户自定义标识符
    - 包名
    - 变量名
    - 常量名
    - 函数名
    - 自定义类型名
    - 方法名
- operators and delimiters（操作符和分隔符）
  - 操作符：不但起到分割 token 的作用，本身也是一个 token
  - 纯分隔符：仅仅起到分割 token 作用，本身不是 token，多个相邻的空格或制表符，编译器会将其作为一个分隔符处理
    - 空格
    - 制表符
    - 回车
    - 换行
- literals（字面常量）
  - 整型字面量
  - 浮点型字面量
  - 复数型字面量
  - 字符串字面量
  - 字符型字面量

## 标识符

变量、类型、常量等语法对象的符号名称。

### 分类：

- 语言设计者预留的标识符
  包括语言的预声明标识符和用于后续语言扩展的保留字。

- 编程者自定义的标识符
  编程人员在编程过程中自行定义的变量名、常量名、函数名等一切符合语言规范的标识符。

**注意：自定义的标识符不应该使用语言设计者预留的标识符，这可能导致歧义，并严重影响代码的可读性。**

### 标识符构成规则

1. 以字母或下划线开始，后跟任意多个字母、数字、下划线；
2. 区分大小写；
3. Unicode 字符可作为标识符的构成，但不推荐；
4. 不能使用语言设计者预留的标识符。

## 关键字

- 语言设计者保留的有特定语法含义的标识符；
- 有自己独特的用途和语法含义；
- 一般用来控制程序结构；
- 每个都代表不同语义的语法糖。

### Go 语言的 25 个关键字

- 引导程序整体结构的 8 个关键字：

```
package    // 定义包名关键字
import     // 导入包名关键字
const      // 常量声明关键字
var        // 变量声明关键字
func       // 函数定义关键字
defer      // 延迟执行关键字
go         // 并发语法糖关键字
return     // 函数返回关键字
```

- 声明复合数据结构的 4 个关键字：

```
 struct     // 定义结构类型关键字
 interface  // 定义接口类型关键字
 map        // 声明或创建map类型关键字
 chan       // 声明或创建通道类型关键字
```

- 控制程序结构的 13 个关键字：

```
if else                                        // if else 语句关键字
for range break continue                       // for 循环使用的关键字
switch select type case default fallthrough    // switch 和 select 语句使用的关键字
goto                                           // goto 跳转语句关键字
```

## 内置数据类型标识符（20 个）

- 布尔型：bool

- 整型：

  - int int8 int16 int32 int64
  - uint uint8 uint16 uint32 uint64
  - uintptr

- 浮点型：

  - float32
  - float64

- 复数：

  - complex64
  - complex128

- 字符：

  - byte（uint8）
  - rune（int32）

- 字符串：string

- 接口：error

## 内置函数（15 个）

- 高级语言的一种语法糖；
- 语言内置的，不需要导入任何包；
- 具有全局可见性（小写字母开头的内置函数并不影响其全局可见性）。

```
make new len cap append copy delete panic recover close complex real image
Print Println
```

使用 new 创建结构，字段默认初始化为其类型的零值，返回值是指向结构的指针。

## 常量值标识符（4 个）

```
true false    // 用于表示 bool 类型的两常量值
iota          // 用于连续的枚举类型声明中
nil           // 指针/引用型的变量的默认值
```

## 空白标识符（1 个）

`_`

用来声明一个匿名的变量，该变量在赋值表达式的左端，通常被用作占位，比如忽略函数多个返回值中的一个和强制编译器做类型检查。

## 操作符（operators）和分隔符（delimiters）

操作符：语言所使用的符号集合。

## 字面常量

源程序中表示固定值的符号，简称字面量。

分类：

- 整型字面量
- 浮点型字面量
- 复数类型字面量
- 字符型字面量
- 字符串字面量
